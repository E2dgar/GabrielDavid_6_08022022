(()=>{"use strict";var e,t,a,o,n,r,i={837:(e,t,a)=>{a.d(t,{Z:()=>s});var o=a(969),n=a(218);var r=a(225);const i=async e=>{document.querySelector("body").className="home-page",document.title="Fisheye ",[document.querySelector("section.hero-photographer"),document.querySelector("section.medias-section"),document.querySelector("aside")].forEach((e=>{e&&e.remove()})),(0,o.Z)("Nos photographes");const t=document.getElementById("main-content");if(!document.querySelector("section.photographer-section")){const a=(0,n.G)("section","photographer-section",[{name:"id",value:"list"}]);e.forEach((e=>a.append((e=>{const t=(0,n.G)("article","photographer"),a=(0,n.G)("a","photographer-link data-link",[{name:"href",value:`#${e.id}`}]),o=(0,n.G)("div","media-container"),i=(0,n.G)("img","",[{name:"src",value:r.E.USER_THUMB+e.portrait},{name:"alt",value:e.name}]);o.append(i);const s=(0,n.G)("h2","","",e.name);a.append(o,s);const c=(0,n.G)("h3","","",`${e.country}, ${e.city}`),l=(0,n.G)("p","","",e.tagline),d=(0,n.G)("p","","",`${e.price}€/jour`);return t.append(a,c,l,d),t})(new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}async getMedias(){const{media:e}=await(0,n.Y)();return e.filter((e=>this.id===parseInt(e.photographerId)))}}(e))))),t.append(a)}},s=e=>{i(e)}},820:(e,t,a)=>{a.d(t,{Z:()=>A});var o=a(969),n=a(218),r=a(225);const i=()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 20 20"),e.setAttribute("aria-hidden",!0);const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),e.append(t),e},s=e=>"image"===e.type?((e,t)=>{const a=document.createElement("img");return a.setAttribute("alt",e),a.setAttribute("src",r.E.MEDIA_IMG_THUMB+t),a})(e.title,e.image):"video"===e.type?((e,t)=>{const a=document.createElement("img");return a.setAttribute("alt",e),a.setAttribute("src",r.E.MEDIA_VIDEO_THUMB+t.replace(".","")+".png"),a})(e.title,e.video):"Format error",c=e=>{const t=document.createElement("article");t.className="media-card";const a=document.createElement("div");a.className="img-container";const o=s(e);a.append(o);const r=document.createElement("p");r.className="media-legend";const c=document.createElement("h3");c.textContent=e.title;const l=document.createElement("span");l.textContent=e.likes;const d=(0,n.G)("button","like-button",[{name:"aria-label",value:"likes"}]),u=i();return u.addEventListener("click",(()=>{const e=document.querySelector("aside span.counter");l.textContent++,e.textContent++})),d.append(u),r.append(c,l,d),t.append(a,r),t},l=(0,n.G)("div","filter-container"),d={popular:"Popularité",date:"Date",title:"Titre"},u=(0,n.G)("div","listbox-area"),p=(0,n.G)("div","left-area"),m=(0,n.G)("span","label",[{name:"id",value:"select-label"}],"Trier par"),h=(0,n.G)("div","",[{name:"id",value:"options-wrapper"}]),v=(0,n.G)("button","",[{name:"id",value:"selected-opt"},{name:"aria-haspopup",value:"listbox"},{name:"aria-labelledby",value:"slect-label slected-opt"}],d[Object.keys(d)[0]]),y=(0,n.G)("ul","hidden",[{name:"id",value:"options-list"},{name:"role",value:"listbox"},{name:"aria-labelledby",value:"select-label"},{name:"tabindex",value:-1}]);for(const[e,t]of Object.entries(d)){let a=(0,n.G)("li","",[{name:"id",value:e},{name:"role",value:"option"}],t);y.append(a)}h.append(v,y),p.append(m,h),u.append(p),l.append(u);const b=l,g=class{constructor(e){this.title=e.title,this.likes=e.likes,this.date=e.date,this.price=e.price}},f=class extends g{constructor(e){super(e),this.type="image",this.image=e.image}},w=class extends g{constructor(e){super(e),this.type="video",this.video=e.video}},E=e=>e.image?new f(e):e.video?new w(e):"Media format unknown",S=e=>{const t=document.getElementById("selected-opt"),a=document.getElementById("options-list"),o=document.querySelectorAll("[role=option]");document.querySelector("[role=option]");const n=e=>{let t=document.querySelector(".focused");t&&t.classList.remove("focused"),e.classList.add("focused"),a.setAttribute("aria-activedescendant",e.id)},r=()=>{let e=document.querySelector(".focused");t.textContent=e.textContent,l()};a.addEventListener("focus",(()=>{a.addEventListener("keydown",i)}));const i=e=>{e.preventDefault();let t=e.which||e.keycode;40===t&&(()=>{let e=document.querySelector(".focused");if(!e.nextSibling)return void console.log("pas de suivant");let t=e.nextSibling;n(t)})(),38===t&&(()=>{let e=document.querySelector(".focused");if(!e.previousSibling)return void console.log("pas de précédent");let t=e.previousSibling;n(t)})(),13!==t&&32!==t||r()};t.addEventListener("click",(()=>{a.classList.remove("hidden"),t.setAttribute("aria-expanded",!0),a.focus()})),new MutationObserver((t=>{s(t,e)})).observe(a,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-activedescendant"]});const s=(e,t)=>{let a=t,o=!1,n=document.querySelector("#options-list").getAttribute("aria-activedescendant");e[0].oldValue!==n&&(!0,a=t.sort(((e,t)=>{if(console.log("filter",n),"popular"===n)return t.likes-e.likes;if("date"===n){let a=new Date(e.date);return new Date(t.date)-a}if("title"===n){let a=e.title.toLowerCase(),o=t.title.toLowerCase();return a<o?-1:a>o?1:0}})),console.log(a),(e=>{const t=document.querySelector(".medias-wrapper");document.querySelectorAll(".media-card").forEach((e=>{e.remove()}));const a=[];e.forEach((e=>a.push(E(e)))),a.forEach((e=>t.append(c(e))))})(a))},l=()=>{a.classList.add("hidden"),t.removeAttribute("aria-expanded")};a.addEventListener("blur",l),o.forEach((e=>{e.addEventListener("click",(e=>(e=>{n(e.target),r()})(e)))}))},G=document.createElementNS("http://www.w3.org/2000/svg","svg");G.setAttribute("viewBox","0 0 42 42"),G.setAttribute("width",42),G.setAttribute("height",42),G.setAttribute("fill","none"),G.classList.add("close-modal");const L=document.createElementNS("http://www.w3.org/2000/svg","path");L.setAttribute("d","M42 4.23L37.77 0L21 16.77L4.23 0L0 4.23L16.77 21L0 37.77L4.23 42L21 25.23L37.77 42L42 37.77L25.23 21L42 4.23Z"),G.append(L);const q=G,x=(e,t)=>{document.title=`Fisheye | ${e.name}`,document.querySelector("body").className="photographer-page",(0,o.Z)(),document.querySelector("#list").remove();const a=(e=>{let t=document.querySelector("section.hero-photographer");t?t.remove():t=(0,n.G)("section","hero-photographer");const a=(0,n.G)("div"),o=(0,n.G)("h2","","",e.name),i=(0,n.G)("p","location","",e.city+", "+e.country),s=(0,n.G)("p","tagmine","",e.tagline);a.append(o,i,s);const c=(0,n.G)("button","contact-button","","Contactez-moi"),l=(0,n.G)("div","img-container"),d=(0,n.G)("img","",[{name:"src",value:r.E.USER_THUMB+e.portrait}]);return l.append(d),t.append(a,c,l),t})(e),s=[];t.forEach((e=>s.push(E(e))));const l=(e=>{let t=document.querySelector("section.medias-section");t&&t.remove(),t=(0,n.G)("section","medias-section");const a=(0,n.G)("div","medias-wrapper");return e.forEach((e=>a.append(c(e)))),t.append(b,a),t})(s),d=document.querySelector("#main-content"),u=((e,t)=>{const a=(0,n.G)("aside");let o=0;e.forEach((e=>o+=e.likes));const r=(0,n.G)("span","counter","",o),s=i(),c=(0,n.G)("span","price","",t+"€ / jour");return a.append(r,s,c),a})(s,e.price);return d.append(a,l,u,(e=>{document.querySelector("body");const t=document.querySelector("#main-content"),a=(document.querySelector(".contact-button"),(0,n.G)("section","modal",[{name:"aria-hidden",value:!0},{name:"role",value:"dialog"},{name:"aria-describedby",value:"modal-title"}])),o=(0,n.G)("form",""),r=(0,n.G)("h1","","","Contactez-moi"),i=(0,n.G)("h2","","",e);o.append(r,i,q),[{id:"firstname",type:"text",label:"Prénom"},{id:"lastname",type:"text",label:"Nom"},{id:"email",type:"email",label:"Email"},{id:"message",type:"textarea",label:"Votre message"}].forEach((e=>{console.log(e.id),o.append((0,n.G)("label",`${e.id}-label`,[{name:"for",value:e.id}],e.label)),"textarea"===e.type?o.append((0,n.G)("textarea","",[{name:"id",value:e.id}])):o.append((0,n.G)("input","",[{name:"id",value:e.id},{name:"type",value:e.type}]))}));const s=(0,n.G)("button","",[{name:"type",value:"submit"}],"Envoyer");o.append(s),a.append(o),t.insertAdjacentElement("afterend",a)})(e.name)),S(t),(()=>{const e=document.querySelector("#main-content"),t=document.querySelector(".contact-button"),a=document.querySelector(".modal"),o=document.querySelector("body"),n=document.querySelector(".close-modal");t.addEventListener("click",(()=>{e.setAttribute("aria-hidden",!0),a.classList.add("display-modal"),o.classList.add("no-scroll")})),n.addEventListener("click",(()=>{e.removeAttribute("aria-hidden"),a.classList.remove("display-modal"),o.classList.remove("no-scroll")}))})(),d},A=async(e,t)=>{const a=e.filter((e=>e.id===parseInt(t))),o=new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}async getMedias(){const{media:e}=await(0,n.Y)();return e.filter((e=>this.id===parseInt(e.photographerId)))}}(a[0]);x(o,await o.getMedias())}},969:(e,t,a)=>{a.d(t,{Z:()=>n});var o=a(218);const n=e=>{const t=document.querySelector("header");if(!document.querySelector("header a")){const e=(0,o.G)("a","data-link",[{name:"href",value:"#"}]),a=(0,o.G)("img","logo",[{name:"alt",value:"Fisheye Home page"},{name:"src",value:"assets/images/logo.png"}]);e.append(a),t.append(e)}if(!document.querySelector("header h1")){const a=(0,o.G)("h1","","",e);t.append(a)}document.querySelector("body").classList.contains("home-page")||document.querySelector("header h1").remove()}},225:(e,t,a)=>{a.d(t,{E:()=>o});const o={API_URL:"src/js/data/photographers.json",USER_THUMB:"assets/photographers/",MEDIA_IMG_THUMB:"assets/medias/img/thumbs/",MEDIA_IMG_WIDE:"assets/medias/img/wide/",MEDIA_VIDEO:"assets/medias/video",MEDIA_VIDEO_THUMB:"assets/medias/video/thumbs/"}},497:(e,t,a)=>{a.a(e,(async(e,t)=>{try{a(485);var o=a(218),n=a(837),r=a(820);const{photographers:e}=await(0,o.Y)();window.onload=()=>{history.pushState(null,null,window.location.pathname);const t=document.querySelectorAll(".data-link");let a="";t.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),a=e.target.closest("a").href,history.pushState(null,null,window.location.pathname+a)}))})),(0,n.Z)(e)};const i=()=>{const t=window.location.hash.substring(1);""!==t&&"main-content"!==t?(0,r.Z)(e,t):(0,n.Z)(e)};window.onpopstate=i,t()}catch(e){t(e)}}),1)},218:(e,t,a)=>{a.d(t,{Y:()=>n,G:()=>r});var o=a(225);const n=async()=>{try{const e=await fetch(o.E.API_URL);return await e.json()}catch(e){console.log(e)}},r=(e,t,a,o)=>{const n=document.createElement(e);return t&&(n.className=t),a&&a.forEach((e=>{n.setAttribute(e.name,e.value)})),o&&(n.textContent=o),n}},485:()=>{}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={exports:{}};return i[e](a,a.exports,c),a.exports}e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},n=e=>!--e.r&&e(),r=(e,t)=>e?e.push(t):n(t),c.a=(i,s,c)=>{var l,d,u,p=c&&[],m=i.exports,h=!0,v=!1,y=(t,a,o)=>{v||(v=!0,a.r+=t.length,t.map(((t,n)=>t[e](a,o))),v=!1)},b=new Promise(((e,t)=>{u=t,d=()=>(e(m),o(p),p=0)}));b[t]=m,b[e]=(e,t)=>{if(h)return n(e);l&&y(l,e,t),r(p,e),b.catch(t)},i.exports=b,s((i=>{var s;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var s=[];i.then((e=>{c[t]=e,o(s),s=0}),(e=>{c[a]=e,o(s),s=0}));var c={};return c[e]=(e,t)=>(r(s,e),i.catch(t)),c}}var l={};return l[e]=e=>n(e),l[t]=i,l})))(i);var c=()=>l.map((e=>{if(e[a])throw e[a];return e[t]})),d=new Promise(((e,t)=>{(s=()=>e(c)).r=0,y(l,s,t)}));return s.r?d:c()}),(e=>(e&&u(b[a]=e),d()))),h=!1},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(497)})();