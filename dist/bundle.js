(()=>{"use strict";var e,t,a,n,o,r,i={837:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(969),o=a(218);var r=a(225);const i=async e=>{document.querySelector("body").className="home-page",document.title="Fisheye ",[document.querySelector("section.hero-photographer"),document.querySelector("section.medias-section"),document.querySelector("aside")].forEach((e=>{e&&e.remove()})),(0,n.Z)("Nos photographes");const t=document.getElementById("main-content");if(!document.querySelector("section.photographer-section")){const a=(0,o.G)("section","photographer-section",[{name:"id",value:"list"}]);e.forEach((e=>a.append((e=>{const t=(0,o.G)("article","photographer"),a=(0,o.G)("a","photographer-link data-link",[{name:"href",value:`#${e.id}`}]),n=(0,o.G)("div","media-container"),i=(0,o.G)("img","",[{name:"src",value:r.E.USER_THUMB+e.portrait},{name:"alt",value:e.name}]);n.append(i);const c=(0,o.G)("h2","","",e.name);a.append(n,c);const s=(0,o.G)("h3","","",`${e.country}, ${e.city}`),l=(0,o.G)("p","","",e.tagline),d=(0,o.G)("p","","",`${e.price}€/jour`);return t.append(a,s,l,d),t})(new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}async getMedias(){const{media:e}=await(0,o.Y)();return e.filter((e=>this.id===parseInt(e.photographerId)))}}(e))))),t.append(a)}},c=e=>{i(e)}},820:(e,t,a)=>{a.d(t,{Z:()=>A});var n=a(969),o=a(218),r=a(225);const i=()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 20 20"),e.setAttribute("aria-hidden",!0);const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),e.append(t),e},c=e=>"image"===e.type?((e,t)=>{const a=document.createElement("img");return a.setAttribute("alt",e),a.setAttribute("src",r.E.MEDIA_IMG_THUMB+t),a})(e.title,e.image):"video"===e.type?((e,t)=>{const a=document.createElement("img");return a.setAttribute("alt",e),a.setAttribute("src",r.E.MEDIA_VIDEO_THUMB+t.replace(".","")+".png"),a})(e.title,e.video):"Format error",s=e=>{const t=document.createElement("article");t.className="media-card";const a=document.createElement("div");a.className="img-container";const n=c(e);a.append(n);const r=document.createElement("p");r.className="media-legend";const s=document.createElement("h3");s.textContent=e.title;const l=document.createElement("span");l.textContent=e.likes;const d=(0,o.G)("button","like-button",[{name:"aria-label",value:"likes"}]),u=i();return u.addEventListener("click",(()=>{const e=document.querySelector("aside span.counter");l.textContent++,e.textContent++})),d.append(u),r.append(s,l,d),t.append(a,r),t},l=(0,o.G)("div","filter-container"),d={popular:"Popularité",date:"Date",title:"Titre"},u=(0,o.G)("div","listbox-area"),p=(0,o.G)("div","left-area"),m=(0,o.G)("span","label",[{name:"id",value:"select-label"}],"Trier par"),h=(0,o.G)("div","",[{name:"id",value:"options-wrapper"}]),v=(0,o.G)("button","",[{name:"id",value:"selected-opt"},{name:"aria-haspopup",value:"listbox"},{name:"aria-labelledby",value:"slect-label slected-opt"}],d[Object.keys(d)[0]]),y=(0,o.G)("ul","hidden",[{name:"id",value:"options-list"},{name:"role",value:"listbox"},{name:"aria-labelledby",value:"select-label"},{name:"tabindex",value:-1}]);for(const[e,t]of Object.entries(d)){let a=(0,o.G)("li","",[{name:"id",value:e},{name:"role",value:"option"}],t);y.append(a)}h.append(v,y),p.append(m,h),u.append(p),l.append(u);const b=l,g=class{constructor(e){this.title=e.title,this.likes=e.likes,this.date=e.date,this.price=e.price}},f=class extends g{constructor(e){super(e),this.type="image",this.image=e.image}},w=class extends g{constructor(e){super(e),this.type="video",this.video=e.video}},E=e=>e.image?new f(e):e.video?new w(e):"Media format unknown",S=e=>{const t=document.getElementById("selected-opt"),a=document.getElementById("options-list"),n=document.querySelectorAll("[role=option]"),o=document.querySelector("[role=option]"),r=e=>{let t=document.querySelector(".focused");t&&t.classList.remove("focused"),e.classList.add("focused"),a.setAttribute("aria-activedescendant",e.id)},i=()=>{let e=document.querySelector(".focused");t.textContent=e.textContent,d()};a.addEventListener("focus",(()=>{a.addEventListener("keydown",c)}));const c=e=>{let t=e.which||e.keycode;e.preventDefault(),40===t&&(()=>{let e=document.querySelector(".focused");if(!e.nextSibling)return void console.log("pas de suivant");let t=e.nextSibling;r(t)})(),38===t&&(()=>{let e=document.querySelector(".focused");if(!e.previousSibling)return void console.log("pas de précédent");let t=e.previousSibling;r(t)})(),13!==t&&32!==t||i()};t.addEventListener("click",(()=>{a.classList.remove("hidden"),t.setAttribute("aria-expanded",!0),a.focus(),a.getAttribute("aria-activedescendant")||o&&r(o)})),new MutationObserver((t=>{l(t,e)})).observe(a,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-activedescendant"]});const l=(e,t)=>{let a=t,n=!1,o=document.querySelector("#options-list").getAttribute("aria-activedescendant");e[0].oldValue!==o&&(!0,a=t.sort(((e,t)=>{if(console.log("filter",o),"popular"===o)return t.likes-e.likes;if("date"===o){let a=new Date(e.date);return new Date(t.date)-a}if("title"===o){let a=e.title.toLowerCase(),n=t.title.toLowerCase();return a<n?-1:a>n?1:0}})),console.log(a),(e=>{const t=document.querySelector(".medias-wrapper");document.querySelectorAll(".media-card").forEach((e=>{e.remove()}));const a=[];e.forEach((e=>a.push(E(e)))),a.forEach((e=>t.append(s(e))))})(a))},d=()=>{a.classList.add("hidden"),t.removeAttribute("aria-expanded")};a.addEventListener("blur",d),n.forEach((e=>{e.addEventListener("click",(e=>(e=>{r(e.target),i()})(e)))}))},G=document.createElementNS("http://www.w3.org/2000/svg","svg");G.setAttribute("viewBox","0 0 42 42"),G.setAttribute("width",42),G.setAttribute("height",42),G.setAttribute("fill","none"),G.classList.add("close-modal");const L=document.createElementNS("http://www.w3.org/2000/svg","path");L.setAttribute("d","M42 4.23L37.77 0L21 16.77L4.23 0L0 4.23L16.77 21L0 37.77L4.23 42L21 25.23L37.77 42L42 37.77L25.23 21L42 4.23Z"),G.append(L);const q=G,x=(e,t)=>{document.title=`Fisheye | ${e.name}`,document.querySelector("body").className="photographer-page",(0,n.Z)(),document.querySelector("#list").remove();const a=(e=>{let t=document.querySelector("section.hero-photographer");t?t.remove():t=(0,o.G)("section","hero-photographer");const a=(0,o.G)("div"),n=(0,o.G)("h2","","",e.name),i=(0,o.G)("p","location","",e.city+", "+e.country),c=(0,o.G)("p","tagmine","",e.tagline);a.append(n,i,c);const s=(0,o.G)("button","contact-button","","Contactez-moi"),l=(0,o.G)("div","img-container"),d=(0,o.G)("img","",[{name:"src",value:r.E.USER_THUMB+e.portrait}]);return l.append(d),t.append(a,s,l),t})(e),c=[];t.forEach((e=>c.push(E(e))));const l=(e=>{let t=document.querySelector("section.medias-section");t&&t.remove(),t=(0,o.G)("section","medias-section");const a=(0,o.G)("div","medias-wrapper");return e.forEach((e=>a.append(s(e)))),t.append(b,a),t})(c),d=document.querySelector("#main-content"),u=((e,t)=>{const a=(0,o.G)("aside");let n=0;e.forEach((e=>n+=e.likes));const r=(0,o.G)("span","counter","",n),c=i(),s=(0,o.G)("span","price","",t+"€ / jour");return a.append(r,c,s),a})(c,e.price);return d.append(a,l,u,(e=>{document.querySelector("body");const t=document.querySelector("#main-content"),a=(document.querySelector(".contact-button"),(0,o.G)("section","modal",[{name:"aria-hidden",value:!0},{name:"role",value:"dialog"},{name:"aria-describedby",value:"modal-title"}])),n=(0,o.G)("form",""),r=(0,o.G)("h1","","","Contactez-moi"),i=(0,o.G)("h2","","",e);n.append(r,i,q),[{id:"firstname",type:"text",label:"Prénom"},{id:"lastname",type:"text",label:"Nom"},{id:"email",type:"email",label:"Email"},{id:"message",type:"textarea",label:"Votre message"}].forEach((e=>{console.log(e.id),n.append((0,o.G)("label",`${e.id}-label`,[{name:"for",value:e.id}],e.label)),"textarea"===e.type?n.append((0,o.G)("textarea","",[{name:"id",value:e.id}])):n.append((0,o.G)("input","",[{name:"id",value:e.id},{name:"type",value:e.type}]))}));const c=(0,o.G)("button","",[{name:"type",value:"submit"}],"Envoyer");n.append(c),a.append(n),t.insertAdjacentElement("afterend",a)})(e.name)),S(t),(()=>{const e=document.querySelector("#main-content"),t=document.querySelector(".contact-button"),a=document.querySelector(".modal"),n=document.querySelector("body"),o=document.querySelector(".close-modal");t.addEventListener("click",(()=>{e.setAttribute("aria-hidden",!0),a.classList.add("display-modal"),n.classList.add("no-scroll")}));const r=()=>{e.removeAttribute("aria-hidden"),a.classList.remove("display-modal"),n.classList.remove("no-scroll")};o.addEventListener("click",r),document.addEventListener("keydown",(e=>{27===(e.which||e.keycode)&&(e.preventDefault(),r())}))})(),d},A=async(e,t)=>{const a=e.filter((e=>e.id===parseInt(t))),n=new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}async getMedias(){const{media:e}=await(0,o.Y)();return e.filter((e=>this.id===parseInt(e.photographerId)))}}(a[0]);x(n,await n.getMedias())}},969:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(218);const o=e=>{const t=document.querySelector("header");if(!document.querySelector("header a")){const e=(0,n.G)("a","data-link",[{name:"href",value:"#"}]),a=(0,n.G)("img","logo",[{name:"alt",value:"Fisheye Home page"},{name:"src",value:"assets/images/logo.png"}]);e.append(a),t.append(e)}if(!document.querySelector("header h1")){const a=(0,n.G)("h1","","",e);t.append(a)}document.querySelector("body").classList.contains("home-page")||document.querySelector("header h1").remove()}},225:(e,t,a)=>{a.d(t,{E:()=>n});const n={API_URL:"src/js/data/photographers.json",USER_THUMB:"assets/photographers/",MEDIA_IMG_THUMB:"assets/medias/img/thumbs/",MEDIA_IMG_WIDE:"assets/medias/img/wide/",MEDIA_VIDEO:"assets/medias/video",MEDIA_VIDEO_THUMB:"assets/medias/video/thumbs/"}},497:(e,t,a)=>{a.a(e,(async(e,t)=>{try{a(485);var n=a(218),o=a(837),r=a(820);const{photographers:e}=await(0,n.Y)();window.onload=()=>{history.pushState(null,null,window.location.pathname);const t=document.querySelectorAll(".data-link");let a="";t.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),a=e.target.closest("a").href,history.pushState(null,null,window.location.pathname+a)}))})),(0,o.Z)(e)};const i=()=>{const t=window.location.hash.substring(1);""!==t&&"main-content"!==t?(0,r.Z)(e,t):(0,o.Z)(e)};window.onpopstate=i,t()}catch(e){t(e)}}),1)},218:(e,t,a)=>{a.d(t,{Y:()=>o,G:()=>r});var n=a(225);const o=async()=>{try{const e=await fetch(n.E.API_URL);return await e.json()}catch(e){console.log(e)}},r=(e,t,a,n)=>{const o=document.createElement(e);return t&&(o.className=t),a&&a.forEach((e=>{o.setAttribute(e.name,e.value)})),n&&(o.textContent=n),o}},485:()=>{}},c={};function s(e){var t=c[e];if(void 0!==t)return t.exports;var a=c[e]={exports:{}};return i[e](a,a.exports,s),a.exports}e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o=e=>!--e.r&&e(),r=(e,t)=>e?e.push(t):o(t),s.a=(i,c,s)=>{var l,d,u,p=s&&[],m=i.exports,h=!0,v=!1,y=(t,a,n)=>{v||(v=!0,a.r+=t.length,t.map(((t,o)=>t[e](a,n))),v=!1)},b=new Promise(((e,t)=>{u=t,d=()=>(e(m),n(p),p=0)}));b[t]=m,b[e]=(e,t)=>{if(h)return o(e);l&&y(l,e,t),r(p,e),b.catch(t)},i.exports=b,c((i=>{var c;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var c=[];i.then((e=>{s[t]=e,n(c),c=0}),(e=>{s[a]=e,n(c),c=0}));var s={};return s[e]=(e,t)=>(r(c,e),i.catch(t)),s}}var l={};return l[e]=e=>o(e),l[t]=i,l})))(i);var s=()=>l.map((e=>{if(e[a])throw e[a];return e[t]})),d=new Promise(((e,t)=>{(c=()=>e(s)).r=0,y(l,c,t)}));return c.r?d:s()}),(e=>(e&&u(b[a]=e),d()))),h=!1},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s(497)})();