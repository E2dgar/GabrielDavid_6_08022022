(()=>{"use strict";const e="assets/photographers/",t=async()=>{try{const e=await fetch("src/js/data/photographers.json");return await e.json()}catch(e){console.log(e)}},n=(e,t,n,a)=>{const o=document.createElement(e);return t&&(o.className=t),n&&n.forEach((e=>{o.setAttribute(e.name,e.value)})),a&&(o.textContent=a),o},a=e=>{const t=document.querySelector("header");if(!document.querySelector("header a")){const e=n("a","data-link",[{name:"href",value:"#"}]),a=n("img","logo",[{name:"alt",value:"Fisheye logo"},{name:"src",value:"assets/images/logo.png"}]);e.append(a),t.append(e)}if(!document.querySelector("header h1")){const a=n("h1","","",e);t.append(a)}document.querySelector("body").classList.contains("home-page")||(document.querySelector("header h1").remove(),console.log("delete"))},o=async()=>{document.querySelector("body").className="home-page";const o=document.querySelector("section.hero-photographer"),c=document.querySelector("section.medias-section");o&&o.remove(),c&&c.remove(),a("Nos photographes");const{photographers:r}=await t(),s=document.getElementById("main-content"),i=n("div","photographer_section",[{name:"id",value:"list"}]);r.forEach((t=>{i.innerHTML+=new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}createUserCard(){return`\n                <article class="photographer">\n                    <a href="#${this.id}" class="photographer-link data-link" data-link="">\n                        <div class="media-container">\n                            <img src="${e+this.portrait}" alt=""/>\n                        </div>\n                        <h2>${this.name}</h2>\n                    </a>\n                    <h3>${this.country}, ${this.city}</h3>\n                    <p>${this.tagline}</p>\n                    <p>${this.price}€/jour</p>\n                </article>\n                `}}(t).createUserCard()})),s.append(i)},c=class{constructor(e){this.title=e.title,this.likes=e.likes,this.date=e.date,this.price=e.price,this.image=e.image,this.video=e.video}},r=class extends c{constructor(e,t,n,a,o){super(e,t,n,a,o)}createGalleryCard(){const e=document.createElement("article");e.className="media-card";const t=document.createElement("div");t.className="img-container";const n=document.createElement("img");n.setAttribute("alt",this.title),n.setAttribute("src","assets/medias/img/thumbs/"+this.image),t.append(n);const a=document.createElement("p");a.className="media-legend";const o=document.createElement("h3");o.textContent=this.title;const c=document.createElement("span");c.textContent=this.likes;const r=document.createElement("button"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 20 20"),s.setAttribute("aria-hidden",!0);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),s.append(i),r.append(s),a.append(o,c,r),e.append(t,a),e}},s=class extends c{constructor(e){super(),this.video=e.video}createGalleryCard(){const e=document.createElement("article");e.className="media-card";const t=document.createElement("div");t.className="img-container";const n=document.createElement("p");n.className="media-legend";const a=document.createElement("h3"),o=document.createElement("span");o.textContent=this.likes;const c=document.createElement("button"),r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),c.append(r),n.append(a,o,c),e.append(t,n)}},i=async o=>{document.querySelector("body").className="photographer-page";const c=o[0];document.title="Fisheye | "+c.name,a();const i=document.getElementById("list");i&&i.remove();const l=document.getElementById("main-content");let d=document.querySelector("section.hero-photographer");d&&d.remove(),d=n("section","hero-photographer");const m=n("div"),p=n("h2","","",c.name),h=n("p","location","",c.city+", "+c.country),u=n("p","tagmine","",c.tagline);m.append(p,h,u);const g=n("button","","","Contactez-moi"),y=n("div","img-container"),v=n("img","",[{name:"src",value:e+c.portrait}]);y.append(v),d.append(m,g,y);const{media:w}=await t(),E=w.filter((e=>c.id===e.photographerId));let C=document.querySelector("section.medias-section");C&&C.remove(),C=n("section","medias-section"),document.createElement("p").textContent="Filtre à implémenter";const f=n("div","medias-wrapper");E.forEach((e=>{e.video||f.append(new class{constructor(e){if(e.image)return new r(e);if(e.video)return new s(e);throw"Invalid format"}}(e).createGalleryCard())})),C.append(f),l.append(d,C)};window.onload=()=>{history.pushState(null,null,window.location.pathname);const e=document.querySelectorAll(".data-link");let t="";e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t=e.target.closest("a").href,history.pushState(null,null,window.location.pathname+t)}))})),o()},window.onpopstate=async()=>{const{photographers:e}=await t(),n=window.location.hash.substring(1);if(""!==n&&"main-content"!==n){const t=e.filter((e=>e.id===parseInt(n)));i(t)}else o()}})();