(()=>{"use strict";const e="assets/photographers/",t=async()=>{try{const e=await fetch("src/js/data/photographers.json");return await e.json()}catch(e){console.log(e)}},n=async()=>{const n=document.querySelector("section.hero-photographer");n&&n.remove(),(e=>{const t=document.querySelector("header"),n=document.createElement("a");n.setAttribute("href","/index.html");const a=document.createElement("img");a.setAttribute("alt","Fisheye logo"),a.setAttribute("src","assets/images/logo.png"),a.className="logo",n.appendChild(a),t.appendChild(n),t.append(n);const o=document.createElement("h1");o.textContent="Nos photographes",t.append(o)})();const{photographers:a}=await t(),o=document.getElementById("main-content"),c=document.createElement("div");c.className="photographer_section",c.setAttribute("id","list"),a.forEach((t=>{c.innerHTML+=new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}createUserCard(){return`\n                <article class="photographer">\n                    <a href="#${this.id}" class="photographer-link data-link" data-link="">\n                        <div class="media-container">\n                            <img src="${e+this.portrait}" alt=""/>\n                        </div>\n                        <h2>${this.name}</h2>\n                    </a>\n                    <h3>${this.country}, ${this.city}</h3>\n                    <p>${this.tagline}</p>\n                    <p>${this.price}€/jour</p>\n                </article>\n                `}}(t).createUserCard()})),o.append(c)},a=class{constructor(e){this.title=e.title,this.likes=e.likes,this.date=e.date,this.price=e.price,this.image=e.image,this.video=e.video}},o=class extends a{constructor(e,t,n,a,o){super(e,t,n,a,o)}createGalleryCard(){const e=document.createElement("article");e.className="media-card";const t=document.createElement("div");t.className="img-container";const n=document.createElement("img");n.setAttribute("alt",this.title),n.setAttribute("src","assets/medias/img/thumbs/"+this.image),t.append(n);const a=document.createElement("p");a.className="media-legend";const o=document.createElement("h3");o.textContent=this.title;const c=document.createElement("span");c.textContent=this.likes;const s=document.createElement("button"),r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 20 20"),r.setAttribute("aria-hidden",!0);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),r.append(i),s.append(r),a.append(o,c,s),e.append(t,a),e}},c=class extends a{constructor(e){super(),this.video=e.video}createGalleryCard(){const e=document.createElement("article");e.className="media-card";const t=document.createElement("div");t.className="img-container";const n=document.createElement("p");n.className="media-legend";const a=document.createElement("h3"),o=document.createElement("span");o.textContent=this.likes;const c=document.createElement("button"),s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),c.append(s),n.append(a,o,c),e.append(t,n)}},s=async n=>{const a=document.getElementById("list");a&&a.remove(),document.title="Fisheye | "+n[0].name;const s=document.getElementById("main-content");let r=document.querySelector("section.hero-photographer");r&&r.remove(),r=document.createElement("section"),r.className="hero-photographer";const i=document.createElement("div"),l=document.createElement("h2");l.textContent=n[0].name;const d=document.createElement("p");d.className="location",d.textContent=n[0].city+", "+n[0].country;const m=document.createElement("p");m.className="tagline",m.textContent=n[0].tagline,i.append(l,d,m);const p=document.createElement("button");p.textContent="Contactez-moi";const h=document.createElement("div");h.className="img-container";const u=document.createElement("img");u.setAttribute("src",e+n[0].portrait),h.append(u),r.append(i,p,h);const{media:g}=await t(),E=g.filter((e=>n[0].id===e.photographerId)),w=document.createElement("section");w.className="medias-section",document.createElement("p").textContent="Filtre à implémenter";const C=document.createElement("div");C.className="medias-wrapper",E.forEach((e=>{e.video||(console.log("add media"),C.append(new class{constructor(e){if(e.image)return new o(e);if(e.video)return new c(e);throw"Invalid format"}}(e).createGalleryCard()),console.log(C))})),w.append(C),s.append(r,w)};window.onload=()=>{n(),pathLocation=window.location,history.pushState(null,null,pathLocation+"/index.html");const e=document.querySelectorAll(".data-link");let t="";e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t=e.target.closest("a").href,history.pushState(null,null,t)}))}))},window.onpopstate=async()=>{const{photographers:e}=await t(),a=window.location.hash.substring(1);if(""!==a){const t=e.filter((e=>e.id===parseInt(a)));s(t)}else n()}})();