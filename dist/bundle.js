(()=>{"use strict";const e="assets/photographers/",t=async()=>{try{const e=await fetch("src/js/data/photographers.json");return await e.json()}catch(e){console.log(e)}},n=(e,t,n,a)=>{const o=document.createElement(e);return t&&(o.className=t),n&&n.forEach((e=>{o.setAttribute(e.name,e.value)})),a&&(o.textContent=a),o},a=e=>{const t=document.querySelector("header");if(!document.querySelector("header a")){const e=n("a","data-link",[{name:"href",value:"#"}]),a=n("img","logo",[{name:"alt",value:"Fisheye Home page"},{name:"src",value:"assets/images/logo.png"}]);e.append(a),t.append(e)}if(!document.querySelector("header h1")){const a=n("h1","","",e);t.append(a)}document.querySelector("body").classList.contains("home-page")||(document.querySelector("header h1").remove(),console.log("delete"))},o=async()=>{document.querySelector("body").className="home-page",document.title="Fisheye ";const o=document.querySelector("section.hero-photographer"),c=document.querySelector("section.medias-section");o&&o.remove(),c&&c.remove(),a("Nos photographes");const{photographers:r}=await t(),s=document.getElementById("main-content");if(!document.querySelector("section.photographer-section")){const t=n("div","photographer-section",[{name:"id",value:"list"}]);r.forEach((a=>t.append(new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}createUserCard(){const t=n("article","photographer"),a=n("a","photographer-link data-link",[{name:"href",value:`#${this.id}`}]),o=n("div","media-container"),c=n("img","",[{name:"src",value:e+this.portrait},{name:"alt",value:this.name}]);o.append(c);const r=n("h2","","",this.name);a.append(o,r);const s=n("h3","","",`${this.country}, ${this.city}`),i=n("p","","",this.tagline),d=n("p","","",`${this.price}€/jour`);return t.append(a,s,i,d),t}}(a).createUserCard()))),s.append(t)}},c=class{constructor(e){this.title=e.title,this.likes=e.likes,this.date=e.date,this.price=e.price,this.image=e.image,this.video=e.video}},r=class extends c{constructor(e,t,n,a,o){super(e,t,n,a,o)}createGalleryCard(){const e=document.createElement("article");e.className="media-card";const t=document.createElement("div");t.className="img-container";const a=document.createElement("img");a.setAttribute("alt",this.title),a.setAttribute("src","assets/medias/img/thumbs/"+this.image),t.append(a);const o=document.createElement("p");o.className="media-legend";const c=document.createElement("h3");c.textContent=this.title;const r=document.createElement("span");r.textContent=this.likes;const s=n("button","like-button",[{name:"aria-label",value:"likes"}]),i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox","0 0 20 20"),i.setAttribute("aria-hidden",!0);const d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),i.append(d),s.append(i),o.append(c,r,s),e.append(t,o),s.addEventListener("click",(()=>{r.textContent++,document.querySelector(".counter").textContent++})),e}},s=class extends c{constructor(e){super(),this.video=e.video}createGalleryCard(){const e=document.createElement("article");e.className="media-card";const t=document.createElement("div");t.className="img-container";const n=document.createElement("p");n.className="media-legend";const a=document.createElement("h3"),o=document.createElement("span");o.textContent=this.likes;const c=document.createElement("button"),r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),c.append(r),n.append(a,o,c),e.append(t,n)}},i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox","0 0 20 20"),i.setAttribute("aria-hidden",!0);const d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),i.append(d);const l=i,m=async o=>{document.querySelector("body").className="photographer-page";const c=o[0];document.title="Fisheye | "+c.name,a();const i=document.getElementById("list");i&&i.remove();const d=document.getElementById("main-content");let m=document.querySelector("section.hero-photographer");m&&m.remove(),m=n("section","hero-photographer");const p=n("div"),u=n("h2","","",c.name),h=n("p","location","",c.city+", "+c.country),g=n("p","tagmine","",c.tagline);p.append(u,h,g);const w=n("button","","","Contactez-moi"),v=n("div","img-container"),y=n("img","",[{name:"src",value:e+c.portrait}]);v.append(y),m.append(p,w,v);const{media:C}=await t(),E=C.filter((e=>c.id===e.photographerId));let S=document.querySelector("section.medias-section");S&&S.remove(),S=n("section","medias-section"),document.createElement("p").textContent="Filtre à implémenter";const b=n("div","medias-wrapper");E.forEach((e=>{e.video||b.append(new class{constructor(e){if(e.image)return new r(e);if(e.video)return new s(e);throw"Invalid format"}}(e).createGalleryCard())})),S.append(b);const f=((e,t)=>{const a=n("aside");let o=0;e.forEach((e=>o+=e.likes));const c=n("span","counter","",o),r=n("span","price","",t+"€ / jour");return a.append(c,l,r),a})(E,c.price);d.append(m,S,f)};window.onload=()=>{history.pushState(null,null,window.location.pathname);const e=document.querySelectorAll(".data-link");let t="";e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t=e.target.closest("a").href,history.pushState(null,null,window.location.pathname+t)}))})),o()},window.onpopstate=async()=>{const{photographers:e}=await t(),n=window.location.hash.substring(1);if(""!==n&&"main-content"!==n){const t=e.filter((e=>e.id===parseInt(n)));m(t)}else o()}})();