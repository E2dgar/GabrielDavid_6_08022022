(()=>{"use strict";var e,t,n,a,o,r,i={837:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(969),o=n(218);var r=n(225);const i=async e=>{document.querySelector("body").className="home-page",document.title="Fisheye ",[document.querySelector("section.hero-photographer"),document.querySelector("section.medias-section"),document.querySelector("aside")].forEach((e=>{e&&e.remove()})),(0,a.Z)("Nos photographes");const t=document.getElementById("main-content");if(!document.querySelector("section.photographer-section")){const n=(0,o.G)("section","photographer-section",[{name:"id",value:"list"}]);e.forEach((e=>n.append((e=>{const t=(0,o.G)("article","photographer"),n=(0,o.G)("a","photographer-link data-link",[{name:"href",value:`#${e.id}`}]),a=(0,o.G)("div","media-container"),i=(0,o.G)("img","",[{name:"src",value:r.E.USER_THUMB+e.portrait},{name:"alt",value:e.name}]);a.append(i);const s=(0,o.G)("h2","","",e.name);n.append(a,s);const c=(0,o.G)("h3","","",`${e.country}, ${e.city}`),l=(0,o.G)("p","","",e.tagline),d=(0,o.G)("p","","",`${e.price}€/jour`);return t.append(n,c,l,d),t})(new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}async getMedias(){const{media:e}=await(0,o.Y)();return e.filter((e=>this.id===parseInt(e.photographerId)))}}(e))))),t.append(n)}},s=e=>{i(e)}},181:(e,t,n)=>{n.d(t,{Z:()=>G});var a=n(969),o=n(218),r=n(225);const i=()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 20 20"),e.setAttribute("aria-hidden",!0);const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),e.append(t),e},s=e=>"image"===e.type?((e,t)=>{const n=document.createElement("img");return n.setAttribute("alt",e),n.setAttribute("src",r.E.MEDIA_IMG_THUMB+t),n})(e.title,e.image):"video"===e.type?((e,t)=>{const n=document.createElement("img");return n.setAttribute("alt",e),n.setAttribute("src",r.E.MEDIA_VIDEO_THUMB+t.replace(".","")+".png"),n})(e.title,e.video):"Format error",c=(0,o.G)("div","filter-container"),l={popular:"Popularité",date:"Date",title:"Titre"},d=(0,o.G)("div","listbox-area"),u=(0,o.G)("div","left-area"),p=(0,o.G)("span","label",[{name:"id",value:"select-label"}],"Trier par"),m=(0,o.G)("div","",[{name:"id",value:"options-wrapper"}]),h=(0,o.G)("button","",[{name:"id",value:"selected-opt"},{name:"aria-haspopup",value:"listbox"},{name:"aria-labelledby",value:"slect-label slected-opt"}],l[Object.keys(l)[0]]),v=(0,o.G)("ul","hidden",[{name:"id",value:"options-list"},{name:"role",value:"listbox"},{name:"aria-labelledby",value:"select-label"},{name:"tabindex",value:-1}]);for(const[e,t]of Object.entries(l)){let n=(0,o.G)("li","",[{name:"id",value:e},{name:"role",value:"option"}],t);v.append(n)}m.append(h,v),u.append(p,m),d.append(u),c.append(d);const y=c,g=e=>{let t=document.querySelector("section.medias-section");t&&t.remove(),t=(0,o.G)("section","medias-section");const n=(0,o.G)("div","medias-wrapper");return e.forEach((e=>n.append((e=>{const t=document.createElement("article");t.className="media-card";const n=document.createElement("div");n.className="img-container";const a=s(e);n.append(a);const r=document.createElement("p");r.className="media-legend";const c=document.createElement("h3");c.textContent=e.title;const l=document.createElement("span");l.textContent=e.likes;const d=(0,o.G)("button","like-button",[{name:"aria-label",value:"likes"}]),u=i();return u.addEventListener("click",(()=>{const e=document.querySelector("aside span.counter");l.textContent++,e.textContent++})),d.append(u),r.append(c,l,d),t.append(n,r),t})(e)))),t.append(y,n),t},b=class{constructor(e){this.title=e.title,this.likes=e.likes,this.date=e.date,this.price=e.price}},f=class extends b{constructor(e){super(e),this.type="image",this.image=e.image}},w=class extends b{constructor(e){super(e),this.type="video",this.video=e.video}},E=e=>{const t=document.getElementById("selected-opt"),n=document.getElementById("options-list"),a=document.querySelectorAll("[role=option]"),o=document.querySelector("[role=option]"),r=e=>{let t=document.querySelector(".focused");t&&t.classList.remove("focused"),e.classList.add("focused"),n.setAttribute("aria-activedescendant",e.id)},i=()=>{let e=document.querySelector(".focused");t.textContent=e.textContent,l()};n.addEventListener("focus",(()=>{n.addEventListener("keydown",s)}));const s=e=>{e.preventDefault();let t=e.which||e.keycode;40===t&&(()=>{let e=document.querySelector(".focused");if(!e.nextSibling)return void console.log("pas de suivant");let t=e.nextSibling;r(t)})(),38===t&&(()=>{let e=document.querySelector(".focused");if(!e.previousSibling)return void console.log("pas de précédent");let t=e.previousSibling;r(t)})(),13!==t&&32!==t||i()};t.addEventListener("click",(()=>{n.classList.remove("hidden"),t.setAttribute("aria-expanded",!0),n.focus(),n.getAttribute("aria-activedescendant")||o&&r(o)})),new MutationObserver((t=>{c(t,e)})).observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-activedescendant"]});const c=(e,t)=>{let n=t,a=!1,o=document.querySelector("#options-list").getAttribute("aria-activedescendant");e[0].oldValue!==o&&(!0,n=t.sort(((e,t)=>{if(console.log("filter",o),"popular"===o)return e.likes-t.likes;if("date"===o){let n=new Date(e.date);return new Date(t.date)-n}if("title"===o){let n=e.title.toLowerCase(),a=t.title.toLowerCase();return n<a?-1:n>a?1:0}})),console.log(n))},l=()=>{n.classList.add("hidden"),t.removeAttribute("aria-expanded")};n.addEventListener("blur",l),a.forEach((e=>{e.addEventListener("click",(e=>(e=>{r(e.target),i()})(e)))}))},S=(e,t)=>{document.querySelector("body").className="photographer-page",(0,a.Z)(),document.querySelector("#list").remove();const n=(e=>{let t=document.querySelector("section.hero-photographer");t?t.remove():t=(0,o.G)("section","hero-photographer");const n=(0,o.G)("div"),a=(0,o.G)("h2","","",e.name),i=(0,o.G)("p","location","",e.city+", "+e.country),s=(0,o.G)("p","tagmine","",e.tagline);n.append(a,i,s);const c=(0,o.G)("button","","","Contactez-moi"),l=(0,o.G)("div","img-container"),d=(0,o.G)("img","",[{name:"src",value:r.E.USER_THUMB+e.portrait}]);return l.append(d),t.append(n,c,l),t})(e),s=[];t.forEach((e=>{return s.push((t=e).image?new f(t):t.video?new w(t):"Media format unknown");var t}));const c=g(s),l=document.querySelector("#main-content"),d=((e,t)=>{const n=(0,o.G)("aside");let a=0;e.forEach((e=>a+=e.likes));const r=(0,o.G)("span","counter","",a),s=i(),c=(0,o.G)("span","price","",t+"€ / jour");return n.append(r,s,c),n})(s,e.price);return l.append(n,c,d),E(t),l},G=async(e,t)=>{const n=e.filter((e=>e.id===parseInt(t))),a=new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}async getMedias(){const{media:e}=await(0,o.Y)();return e.filter((e=>this.id===parseInt(e.photographerId)))}}(n[0]);S(a,await a.getMedias())}},969:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(218);const o=e=>{const t=document.querySelector("header");if(!document.querySelector("header a")){const e=(0,a.G)("a","data-link",[{name:"href",value:"#"}]),n=(0,a.G)("img","logo",[{name:"alt",value:"Fisheye Home page"},{name:"src",value:"assets/images/logo.png"}]);e.append(n),t.append(e)}if(!document.querySelector("header h1")){const n=(0,a.G)("h1","","",e);t.append(n)}document.querySelector("body").classList.contains("home-page")||document.querySelector("header h1").remove()}},225:(e,t,n)=>{n.d(t,{E:()=>a});const a={API_URL:"src/js/data/photographers.json",USER_THUMB:"assets/photographers/",MEDIA_IMG_THUMB:"assets/medias/img/thumbs/",MEDIA_IMG_WIDE:"assets/medias/img/wide/",MEDIA_VIDEO:"assets/medias/video",MEDIA_VIDEO_THUMB:"assets/medias/video/thumbs/"}},497:(e,t,n)=>{n.a(e,(async(e,t)=>{try{n(485);var a=n(218),o=n(837),r=n(181);const{photographers:e}=await(0,a.Y)();window.onload=()=>{history.pushState(null,null,window.location.pathname);const t=document.querySelectorAll(".data-link");let n="";t.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),n=e.target.closest("a").href,history.pushState(null,null,window.location.pathname+n)}))})),(0,o.Z)(e)};const i=()=>{const t=window.location.hash.substring(1);""!==t&&"main-content"!==t?(0,r.Z)(e,t):(0,o.Z)(e)};window.onpopstate=i,t()}catch(e){t(e)}}),1)},218:(e,t,n)=>{n.d(t,{Y:()=>o,G:()=>r});var a=n(225);const o=async()=>{try{const e=await fetch(a.E.API_URL);return await e.json()}catch(e){console.log(e)}},r=(e,t,n,a)=>{const o=document.createElement(e);return t&&(o.className=t),n&&n.forEach((e=>{o.setAttribute(e.name,e.value)})),a&&(o.textContent=a),o}},485:()=>{}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return i[e](n,n.exports,c),n.exports}e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o=e=>!--e.r&&e(),r=(e,t)=>e?e.push(t):o(t),c.a=(i,s,c)=>{var l,d,u,p=c&&[],m=i.exports,h=!0,v=!1,y=(t,n,a)=>{v||(v=!0,n.r+=t.length,t.map(((t,o)=>t[e](n,a))),v=!1)},g=new Promise(((e,t)=>{u=t,d=()=>(e(m),a(p),p=0)}));g[t]=m,g[e]=(e,t)=>{if(h)return o(e);l&&y(l,e,t),r(p,e),g.catch(t)},i.exports=g,s((i=>{var s;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var s=[];i.then((e=>{c[t]=e,a(s),s=0}),(e=>{c[n]=e,a(s),s=0}));var c={};return c[e]=(e,t)=>(r(s,e),i.catch(t)),c}}var l={};return l[e]=e=>o(e),l[t]=i,l})))(i);var c=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),d=new Promise(((e,t)=>{(s=()=>e(c)).r=0,y(l,s,t)}));return s.r?d:c()}),(e=>(e&&u(g[n]=e),d()))),h=!1},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(497)})();