(()=>{"use strict";const e="assets/photographers/",t=async()=>{try{const e=await fetch("src/js/data/photographers.json");return await e.json()}catch(e){console.log(e)}},a=(e,t,a,n)=>{const o=document.createElement(e);return t&&(o.className=t),a&&a.forEach((e=>{o.setAttribute(e.name,e.value)})),n&&(o.textContent=n),o},n=e=>{const t=document.querySelector("header");if(!document.querySelector("header a")){const e=a("a","data-link",[{name:"href",value:"#"}]),n=a("img","logo",[{name:"alt",value:"Fisheye Home page"},{name:"src",value:"assets/images/logo.png"}]);e.append(n),t.append(e)}if(!document.querySelector("header h1")){const n=a("h1","","",e);t.append(n)}document.querySelector("body").classList.contains("home-page")||(document.querySelector("header h1").remove(),console.log("delete"))},o=async()=>{document.querySelector("body").className="home-page",document.title="Fisheye ";const o=document.querySelector("section.hero-photographer"),c=document.querySelector("section.medias-section");o&&o.remove(),c&&c.remove(),n("Nos photographes");const{photographers:s}=await t(),r=document.getElementById("main-content");if(!document.querySelector("section.photographer-section")){const t=a("div","photographer-section",[{name:"id",value:"list"}]);s.forEach((n=>t.append(new class{constructor(e){this.name=e.name,this.id=e.id,this.city=e.city,this.country=e.country,this.tagline=e.tagline,this.price=e.price,this.portrait=e.portrait}createUserCard(){const t=a("article","photographer"),n=a("a","photographer-link data-link",[{name:"href",value:`#${this.id}`}]),o=a("div","media-container"),c=a("img","",[{name:"src",value:e+this.portrait},{name:"alt",value:this.name}]);o.append(c);const s=a("h2","","",this.name);n.append(o,s);const r=a("h3","","",`${this.country}, ${this.city}`),i=a("p","","",this.tagline),l=a("p","","",`${this.price}€/jour`);return t.append(n,r,i,l),t}}(n).createUserCard()))),r.append(t)}},c=class{constructor(e){this.title=e.title,this.likes=e.likes,this.date=e.date,this.price=e.price,this.image=e.image,this.video=e.video}},s=class extends c{constructor(e,t,a,n,o){super(e,t,a,n,o)}createGalleryCard(){const e=document.createElement("article");e.className="media-card";const t=document.createElement("div");t.className="img-container";const n=document.createElement("img");n.setAttribute("alt",this.title),n.setAttribute("src","assets/medias/img/thumbs/"+this.image),t.append(n);const o=document.createElement("p");o.className="media-legend";const c=document.createElement("h3");c.textContent=this.title;const s=document.createElement("span");s.textContent=this.likes;const r=a("button","like-button",[{name:"aria-label",value:"likes"}]),i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox","0 0 20 20"),i.setAttribute("aria-hidden",!0);const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),i.append(l),r.append(i),o.append(c,s,r),e.append(t,o),r.addEventListener("click",(()=>{s.textContent++,document.querySelector(".counter").textContent++})),e}},r=class extends c{constructor(e){super(),this.video=e.video}createGalleryCard(){const e=document.createElement("article");e.className="media-card";const t=document.createElement("div");t.className="img-container";const a=document.createElement("p");a.className="media-legend";const n=document.createElement("h3"),o=document.createElement("span");o.textContent=this.likes;const c=document.createElement("button"),s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),c.append(s),a.append(n,o,c),e.append(t,a)}},i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox","0 0 20 20"),i.setAttribute("aria-hidden",!0);const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d","M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z"),i.append(l);const d=i,p=a("div","listbox"),m=a("span","",[{name:"id",value:"select-label"}],"Trier par"),u=a("div","select"),h=a("button","",[{name:"aria-haspopup",value:"listbox"},{name:"aria-labelledby",value:"select-label select-button"},{name:"id",value:"select-button"}]),g=a("ul","hidden",[{name:"tabindex",value:-1},{name:"role",value:"listbox"},{name:"aria-labelledby",value:"select-label"},{name:"aria-activedescendant",value:""}]);[{key:"popular",value:"Popularité"},{key:"date",value:"Date"},{key:"title",value:"Titre"}].forEach((e=>{let t=a("li","",[{name:"id",value:e.key},{name:"role",value:"option"}],e.value);g.append(t)})),u.append(h,g),p.append(m,u);const v=p,y=async o=>{document.querySelector("body").className="photographer-page";const c=o[0];document.title="Fisheye | "+c.name,n();const i=document.getElementById("list");i&&i.remove();const l=document.getElementById("main-content");let p=document.querySelector("section.hero-photographer");p&&p.remove(),p=a("section","hero-photographer");const m=a("div"),u=a("h2","","",c.name),h=a("p","location","",c.city+", "+c.country),g=a("p","tagmine","",c.tagline);m.append(u,h,g);const y=a("button","","","Contactez-moi"),w=a("div","img-container"),b=a("img","",[{name:"src",value:e+c.portrait}]);w.append(b),p.append(m,y,w);const{media:C}=await t(),E=C.filter((e=>c.id===e.photographerId));let S=document.querySelector("section.medias-section");S&&S.remove(),S=a("section","medias-section");const f=a("div","medias-wrapper");E.forEach((e=>{e.video||f.append(new class{constructor(e){if(e.image)return new s(e);if(e.video)return new r(e);throw"Invalid format"}}(e).createGalleryCard())})),S.append(v,f);const k=((e,t)=>{const n=a("aside");let o=0;e.forEach((e=>o+=e.likes));const c=a("span","counter","",o),s=a("span","price","",t+"€ / jour");return n.append(c,d,s),n})(E,c.price);l.append(p,S,k)};window.onload=()=>{history.pushState(null,null,window.location.pathname);const e=document.querySelectorAll(".data-link");let t="";e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t=e.target.closest("a").href,history.pushState(null,null,window.location.pathname+t)}))})),o()},window.onpopstate=async()=>{const{photographers:e}=await t(),a=window.location.hash.substring(1);if(""!==a&&"main-content"!==a){const t=e.filter((e=>e.id===parseInt(a)));y(t)}else o()}})();